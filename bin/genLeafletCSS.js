const fs = require('fs');
const os = require("os");
const path = require('path');

const msg = '/* this file has been dynamically generated by [bin/genLeafletCSS.js] */'+os.EOL+os.EOL;

// strip the `background-image` styles, then remove any blank styles that were created
let css = fs
	.readFileSync('./node_modules/leaflet/dist/leaflet.css')
	.toString()
	.replace(/^[\t ]*background\-image\:[^;]+;$/mg,'')
	.replace(/[\r\n \t]+\.leaflet[^{]+\{[\r\n \t]+\}/,'')
	;

fs.writeFileSync('./src/leaflet/leaflet-generated.css',msg+css);
